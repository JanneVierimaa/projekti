create database projekti;

use projekti;



CREATE TABLE IF NOT EXISTS `projekti`.`Asiakas` (
  `idAsiakas` INT UNSIGNED NOT NULL AUTO_INCREMENT,
  `etunimi` VARCHAR(45) NOT NULL,
  `sukunimi` VARCHAR(45) NOT NULL,
  `osoite` VARCHAR(100) NOT NULL,
  `username` VARCHAR(45) NOT NULL,
  `password` VARCHAR(255) NOT NULL,
  PRIMARY KEY (`idAsiakas`),
  UNIQUE INDEX `username_UNIQUE` (`username` ASC))
ENGINE = InnoDB;

CREATE TABLE IF NOT EXISTS `projekti`.`Tuote` (
  `idTuote` INT UNSIGNED NOT NULL AUTO_INCREMENT,
  `tuoteNimi` VARCHAR(100) NOT NULL,
  `tuotekuvaus` VARCHAR(455) NOT NULL,
  `hinta` DECIMAL(5,2) UNSIGNED NOT NULL,
  `kuva` VARCHAR(100) NOT NULL,
  PRIMARY KEY (`idTuote`))
ENGINE = InnoDB;


insert into Asiakas values(1,'Teuvo','Testaaja','Testikatu1','tstuser','tstpass');

insert into Tuote(tuoteNimi,tuotekuvaus,hinta,kuva) values('Television','The best TV in the world',499,'tv.jpg');
insert into Tuote(tuoteNimi,tuotekuvaus,hinta,kuva) values('Phone','The best smartphone in the world',999,'phone.jpg');
insert into Tuote(tuoteNimi,tuotekuvaus,hinta,kuva) values('Laptop','The best laptop in the world',689,'laptop.jpg');


GRANT ALL ON projekti.* TO 'phpUser'@'localhost' IDENTIFIED BY 'phpPass';

TÄHÄN ASTI ON TEHTY TOIMINNALLISUUS
---------------------------------------------------------------------------

create table basket(
id_basket INT auto_increment primary key,
id_products INT,
username VARCHAR(30),
amount INT,
foreign key(id_products) references products(id_products) on update cascade on delete restrict,
foreign key(username) references user(username) on update cascade on delete restrict
) Engine=InnoDB;
